# Ghost Detector - iOS App

Развлекательное приложение-детектор призраков для iOS, созданное на SwiftUI.

## Структура проекта

```
Ghost/
├── Models/
│   ├── UserSettings.swift          # Модель настроек пользователя
│   └── GhostDetection.swift        # Модели для детекции (точки радара, магнитометр)
├── Services/
│   ├── StorageService.swift        # Работа с UserDefaults
│   ├── AudioService.swift          # Воспроизведение звуков
│   ├── CameraService.swift         # Работа с камерой (фон)
│   ├── RadarService.swift          # Симуляция радара
│   ├── MagnetometerService.swift   # Симуляция магнитометра
│   ├── OnboardingService.swift     # Логика онбординга
│   ├── PaywallService.swift        # Логика paywall
│   └── SubscriptionService.swift   # Интеграция с Revenue Cat
├── ViewModels/
│   ├── MainViewModel.swift         # ViewModel главного экрана
│   ├── OnboardingViewModel.swift   # ViewModel онбординга
│   ├── PaywallViewModel.swift      # ViewModel paywall
│   └── SubscriptionViewModel.swift # ViewModel подписок
├── Views/
│   ├── MainView.swift              # Главный экран
│   ├── RadarView.swift             # Вид радара
│   ├── MagnetometerView.swift      # Вид магнитометра
│   ├── OnboardingView.swift        # Экран онбординга
│   ├── PaywallView.swift           # Экран paywall
│   └── SubscriptionView.swift      # Экран подписок
├── GhostApp.swift                  # Точка входа приложения
└── Info.plist                      # Разрешения (камера, микрофон)
```

## Основные функции

- **Камера как фон**: Использует заднюю камеру как живой фон приложения
- **Фейковый радар**: Анимированные точки, появляющиеся случайным образом
- **Фейковый магнитометр**: Симуляция показаний с анимацией свечи
- **Случайные звуки**: Воспроизведение предзагруженных аудиофайлов
- **Onboarding**: Экран приветствия при первом запуске
- **Подписки**: Экран подписок с интеграцией Revenue Cat (месяц и год)
- **Paywall**: Экран для разблокировки Premium функций
- **Настройки**: Управление звуком и чувствительностью радара

## Требования

- iOS 15.0+
- Xcode 16.2+
- Swift 5.0+

## Установка

1. Откройте проект в Xcode
2. Добавьте звуковые файлы в проект (форматы: .mp3, .wav, .m4a, .aac)
3. Добавьте видео файлы, если планируете их использовать
4. Настройте App Icon в Assets.xcassets
5. Соберите и запустите проект

## Добавление звуков

Поместите звуковые файлы в папку проекта. AudioService автоматически обнаружит файлы с расширениями:
- .mp3
- .wav
- .m4a
- .aac

## Настройка Info.plist

Разрешения для камеры и микрофона уже настроены в Info.plist. При необходимости можно изменить описания разрешений.

## Архитектура

Приложение использует паттерн MVVM (Model-View-ViewModel) с сервисным слоем:

- **Models**: Структуры данных
- **Services**: Бизнес-логика и работа с системными сервисами
- **ViewModels**: Связь между View и Services
- **Views**: UI компоненты SwiftUI

## Хранение данных

Все данные хранятся в UserDefaults через StorageService. CoreData не используется.

## Интеграция Revenue Cat

Приложение использует Revenue Cat для управления подписками. Для настройки:

1. Следуйте инструкциям в файле `REVENUE_CAT_SETUP.md`
2. Добавьте Revenue Cat SDK через Swift Package Manager
3. Настройте продукты в App Store Connect
4. Настройте Revenue Cat Dashboard
5. Обновите API ключ в `SubscriptionService.swift`

### Подписки

Приложение поддерживает две подписки:
- **Месячная подписка**: Автоматически возобновляемая подписка на 1 месяц
- **Годовая подписка**: Автоматически возобновляемая подписка на 1 год

Экран подписок появляется автоматически через 5 секунд после завершения онбординга (если нет активной подписки).

## Следующие шаги

1. Добавить звуковые и видео файлы в проект
2. Настроить дизайн (цвета, иконки, изображения)
3. Интегрировать StoreKit для реальных покупок
4. Протестировать на реальных устройствах
5. Подготовить для публикации в App Store
